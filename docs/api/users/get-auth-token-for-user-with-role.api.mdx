---
id: get-auth-token-for-user-with-role
title: "Get authentication token with role"
description: "Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role."
sidebar_label: "Get authentication token with role"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/users/users-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Get authentication token with role"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/v1.0/users/token/{SiteId}/{RoleId}/{UserId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role.

**Prerequisites**
1. **SiteId** - Use [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) to list locations. Extract `Items[].SiteId`.
2. **RoleId** - Use [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles) to list roles. Extract `Items[].RoleId`.
3. **UserId** - Use [POST /api/v1.0/users](/docs/api/users/search-users) to locate the user. Extract `Items[].UserId`.

**Workflow Example**
1. Identify site and role: [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) and [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles).
2. Find the user: [POST /api/v1.0/users](/docs/api/users/search-users) with filters to get UserId.
3. Request token: POST this endpoint with SiteId, RoleId, and UserId.

**Minimal Required Fields**: SiteId, RoleId, UserId (all path parameters)

**Notes**: Requires elevated permissions. Treat the returned token as a credential and transmit only over HTTPS.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"SiteId","in":"path","required":true,"description":"UUID of the site","schema":{"type":"string","format":"uuid"}},{"name":"RoleId","in":"path","required":true,"description":"UUID of the role to assign","schema":{"type":"string","format":"uuid"}},{"name":"UserId","in":"path","required":true,"description":"UUID of the user","schema":{"type":"string","format":"uuid"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Authentication token generated","content":{"application/json":{"schema":{"type":"object","description":"Response containing a single GUID.","allOf":[{"type":"object","description":"Standard response envelope for single-item GET operations. The `Item` property contains the requested entity.","properties":{"Item":{"description":"The requested entity. Structure varies by endpoint."},"UserToken":{"type":"string","format":"uuid","nullable":true,"description":"Authenticated session identifier"},"RequestDate":{"type":"string","format":"date-time","description":"Timestamp when the API processed the request"},"ExecutionTime":{"type":"number","format":"double","description":"Server-side execution time in milliseconds"},"StatusCode":{"type":"integer","description":"HTTP status code (typically 200 for successful GET)","example":200},"Message":{"type":"string","nullable":true,"description":"Optional informational message"},"ErrorKey":{"type":"string","nullable":true,"description":"Machine-readable error key for client-side error handling"},"ServerName":{"type":"string","description":"Application node that processed the request"},"ProcessId":{"type":"integer","description":"Internal process identifier for diagnostics"},"OperationId":{"type":"string","nullable":true,"description":"Trace identifier for log correlation"},"Properties":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata properties"},"Metadata":{"type":"object","additionalProperties":{"type":"string"},"nullable":true,"description":"Key-value metadata pairs"},"Errors":{"type":"array","nullable":true,"items":{"type":"object","description":"A non-fatal validation error that did not prevent the operation from completing","properties":{"Field":{"type":"string","nullable":true,"description":"Name of the field with the validation issue"},"Message":{"type":"string","description":"Human-readable description of the validation issue"},"Code":{"type":"string","nullable":true,"description":"Machine-readable error code"}},"required":["Message"],"title":"SoftValidationError"},"description":"List of soft validation errors"}},"required":["Item","StatusCode"],"title":"ItemGetResponse"}],"properties":{"Item":{"type":"string","format":"uuid"}},"title":"GuidGetResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","description":"Error response for authentication failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (401)","example":401},"Message":{"type":"string","description":"Human-readable description of the authentication error","example":"Authentication required. Please provide valid credentials."}},"required":["StatusCode","Message"],"title":"UnauthorizedError"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","description":"Error response for authorization/permission failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (403)","example":403},"Message":{"type":"string","description":"Human-readable description of the authorization error","example":"You do not have permission to perform this action"}},"required":["StatusCode","Message"],"title":"ForbiddenError"}}}},"404":{"description":"User or role not found","content":{"application/json":{"schema":{"type":"object","description":"Error response when a requested resource is not found","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (404)","example":404},"Message":{"type":"string","description":"Human-readable description indicating the resource was not found","example":"The requested resource was not found"},"ResourceId":{"type":"string","description":"ID of the resource that was not found"}},"required":["StatusCode","Message"],"title":"NotFoundError"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","description":"Error response for internal server errors","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (500)","example":500},"Message":{"type":"string","description":"Human-readable description of the server error","example":"An internal server error occurred. Please try again later."},"RequestId":{"type":"string","description":"Unique request identifier for troubleshooting","example":"req_1234567890abcdef"}},"required":["StatusCode","Message"],"title":"InternalServerError"}}}}}}
>
  
</StatusCodes>


      