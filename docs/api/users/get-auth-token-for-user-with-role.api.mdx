---
id: get-auth-token-for-user-with-role
title: "Get authentication token with role"
description: "Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role."
sidebar_label: "Get authentication token with role"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/users/users-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Get authentication token with role"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/v1.0/users/token/{SiteId}/{RoleId}/{UserId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role.

**Prerequisites**
1. **SiteId** - Use [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) to list locations. Extract `Items[].SiteId`.
2. **RoleId** - Use [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles) to list roles. Extract `Items[].RoleId`.
3. **UserId** - Use [POST /api/v1.0/users](/docs/api/users/search-users) to locate the user. Extract `Items[].UserId`.

**Workflow Example**
1. Identify site and role: [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) and [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles).
2. Find the user: [POST /api/v1.0/users](/docs/api/users/search-users) with filters to get UserId.
3. Request token: POST this endpoint with SiteId, RoleId, and UserId.

**Minimal Required Fields**: SiteId, RoleId, UserId (all path parameters)

**Notes**: Requires elevated permissions. Treat the returned token as a credential and transmit only over HTTPS.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"SiteId","in":"path","required":true,"description":"UUID of the site","schema":{"type":"string","format":"uuid"}},{"name":"RoleId","in":"path","required":true,"description":"UUID of the role to assign","schema":{"type":"string","format":"uuid"}},{"name":"UserId","in":"path","required":true,"description":"UUID of the user","schema":{"type":"string","format":"uuid"}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Authentication token generated","content":{"application/json":{"schema":{"type":"object","description":"Response containing a single GUID.","allOf":[{"type":"object","description":"Standard response envelope for single-item GET operations. The `Item` property contains the requested entity.","properties":{"Item":{"description":"The requested entity. Structure varies by endpoint."},"UserToken":{"type":"string","format":"uuid","nullable":true,"description":"Authenticated session identifier"},"RequestDate":{"type":"string","format":"date-time","description":"Timestamp when the API processed the request"},"ExecutionTime":{"type":"number","format":"double","description":"Server-side execution time in milliseconds"},"StatusCode":{"type":"integer","description":"HTTP status code (typically 200 for successful GET)","example":200},"Message":{"type":"string","nullable":true,"description":"Optional informational message"},"ErrorKey":{"type":"string","nullable":true,"description":"Machine-readable error key for client-side error handling"},"ServerName":{"type":"string","description":"Application node that processed the request"},"ProcessId":{"type":"integer","description":"Internal process identifier for diagnostics"},"OperationId":{"type":"string","nullable":true,"description":"Trace identifier for log correlation"},"Properties":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata properties"},"Metadata":{"type":"object","additionalProperties":{"type":"string"},"nullable":true,"description":"Key-value metadata pairs"},"Errors":{"type":"array","nullable":true,"items":{"type":"object","description":"A non-fatal validation error that did not prevent the operation from completing","properties":{"Field":{"type":"string","nullable":true,"description":"Name of the field with the validation issue"},"Message":{"type":"string","description":"Human-readable description of the validation issue"},"Code":{"type":"string","nullable":true,"description":"Machine-readable error code"}},"required":["Message"],"title":"SoftValidationError"},"description":"List of soft validation errors"}},"required":["Item","StatusCode"],"title":"ItemGetResponse"}],"properties":{"Item":{"type":"string","format":"uuid"}},"title":"GuidGetResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","description":"Error response for authentication failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (401)","example":401},"Message":{"type":"string","description":"Human-readable description of the authentication error","example":"Authentication required. Please provide valid credentials."}},"required":["StatusCode","Message"],"title":"UnauthorizedError"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","description":"Error response for authorization/permission failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (403)","example":403},"Message":{"type":"string","description":"Human-readable description of the authorization error","example":"You do not have permission to perform this action"}},"required":["StatusCode","Message"],"title":"ForbiddenError"}}}},"404":{"description":"User or role not found","content":{"application/json":{"schema":{"type":"object","description":"Error response when a requested resource is not found","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (404)","example":404},"Message":{"type":"string","description":"Human-readable description indicating the resource was not found","example":"The requested resource was not found"},"ResourceId":{"type":"string","description":"ID of the resource that was not found"}},"required":["StatusCode","Message"],"title":"NotFoundError"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","description":"Error response for internal server errors","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (500)","example":500},"Message":{"type":"string","description":"Human-readable description of the server error","example":"An internal server error occurred. Please try again later."},"RequestId":{"type":"string","description":"Unique request identifier for troubleshooting","example":"req_1234567890abcdef"}},"required":["StatusCode","Message"],"title":"InternalServerError"}}}}}}
>
  
</StatusCodes>


      