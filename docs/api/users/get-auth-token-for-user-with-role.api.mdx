---
id: get-auth-token-for-user-with-role
title: "Get authentication token with role"
description: "Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role."
sidebar_label: "Get authentication token with role"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/api/users/users-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Get authentication token with role"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/api/v1.0/users/token/{SiteId}/{RoleId}/{UserId}"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Generates an authentication token for a specific user at a site while forcing the token to carry the specified role. This is commonly used for controlled impersonation or service integrations that must assume a precise role.

**Prerequisites**
1. **SiteId** - Use [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) to list locations. Extract `Items[].SiteId`.
2. **RoleId** - Use [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles) to list roles. Extract `Items[].RoleId`.
3. **UserId** - Use [POST /api/v1.0/users](/docs/api/users/search-users) to locate the user. Extract `Items[].UserId`.

**Workflow Example**
1. Identify site and role: [GET /api/v2.0/users/my/locations](/docs/api/locations/get-current-user-locations-v-2) and [GET /api/v1.0/sites/roles](/docs/api/sites/list-roles).
2. Find the user: [POST /api/v1.0/users](/docs/api/users/search-users) with filters to get UserId.
3. Request token: POST this endpoint with SiteId, RoleId, and UserId.

**Minimal Required Fields**: SiteId, RoleId, UserId (all path parameters)

**Notes**: Requires elevated permissions. Treat the returned token as a credential and transmit only over HTTPS.

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"SiteId","in":"path","required":true,"description":"UUID of the site","schema":{"type":"string","format":"uuid"}},{"name":"RoleId","in":"path","required":true,"description":"UUID of the role to assign","schema":{"type":"string","format":"uuid"}},{"name":"UserId","in":"path","required":true,"description":"UUID of the user Obtain via [POST /api/v1.0/users](/docs/api/users/search-users), extract `Items[].UserId`.","schema":{"type":"string","format":"uuid","x-obtained-from":{"operationId":"searchUsers","endpoint":"POST /api/v1.0/users","responseField":"Items[].UserId"}}}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Authentication token generated","content":{"application/json":{"schema":{"type":"object","description":"Response containing a single GUID.","allOf":[{"type":"object","description":"Standard response envelope for single-item GET operations. The `Item` property contains the requested entity.","properties":{"Item":{"description":"The requested entity. Structure varies by endpoint."},"UserToken":{"type":"string","format":"uuid","nullable":true,"description":"Authenticated session identifier"},"RequestDate":{"type":"string","format":"date-time","description":"Timestamp when the API processed the request"},"ExecutionTime":{"type":"number","format":"double","description":"Server-side execution time in milliseconds"},"StatusCode":{"type":"integer","description":"HTTP status code (typically 200 for successful GET)","example":200},"Message":{"type":"string","nullable":true,"description":"Optional informational message"},"ErrorKey":{"type":"string","nullable":true,"description":"Machine-readable error key for client-side error handling"},"ServerName":{"type":"string","description":"Application node that processed the request"},"ProcessId":{"type":"integer","description":"Internal process identifier for diagnostics"},"OperationId":{"type":"string","nullable":true,"description":"Trace identifier for log correlation"},"Properties":{"type":"object","additionalProperties":true,"nullable":true,"description":"Additional metadata properties"},"Metadata":{"type":"object","additionalProperties":{"type":"string"},"nullable":true,"description":"Key-value metadata pairs"},"Errors":{"type":"array","nullable":true,"items":{"type":"object","description":"A non-fatal validation error that did not prevent the operation from completing","properties":{"Field":{"type":"string","nullable":true,"description":"Name of the field with the validation issue"},"Message":{"type":"string","description":"Human-readable description of the validation issue"},"Code":{"type":"string","nullable":true,"description":"Machine-readable error code"}},"required":["Message"],"title":"SoftValidationError"},"description":"List of soft validation errors"}},"required":["Item","StatusCode"],"title":"ItemGetResponse"}],"properties":{"Item":{"type":"string","format":"uuid"}},"title":"GuidGetResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"type":"object","description":"Error response for authentication failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (401)","example":401},"Message":{"type":"string","description":"Human-readable description of the authentication error","example":"Authentication required. Please provide valid credentials."}},"required":["StatusCode","Message"],"title":"UnauthorizedError"}}}},"403":{"description":"Forbidden","content":{"application/json":{"schema":{"type":"object","description":"Error response for authorization/permission failures","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (403)","example":403},"Message":{"type":"string","description":"Human-readable description of the authorization error","example":"You do not have permission to perform this action"}},"required":["StatusCode","Message"],"title":"ForbiddenError"}}}},"404":{"description":"User or role not found","content":{"application/json":{"schema":{"type":"object","description":"Error response when a requested resource is not found","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (404)","example":404},"Message":{"type":"string","description":"Human-readable description indicating the resource was not found","example":"The requested resource was not found"},"ResourceId":{"type":"string","description":"ID of the resource that was not found"}},"required":["StatusCode","Message"],"title":"NotFoundError"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"type":"object","description":"Error response for internal server errors","properties":{"StatusCode":{"type":"integer","description":"HTTP status code (500)","example":500},"Message":{"type":"string","description":"Human-readable description of the server error","example":"An internal server error occurred. Please try again later."},"RequestId":{"type":"string","description":"Unique request identifier for troubleshooting","example":"req_1234567890abcdef"}},"required":["StatusCode","Message"],"title":"InternalServerError"}}}}}}
>
  
</StatusCodes>


      